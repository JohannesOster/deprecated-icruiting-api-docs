post:
  tags:
    - tenants
  summary: Create tenant
  description: '
    <p>
    Sign Up a new user and create a new tenant entity. <br />
    The new user will have the user-role "admin" in the newly created tenant.
    Furthermore, a stripe subscription will be created with the given price (stripePriceId).
    It will start a 30-day free trial without requireing a payment method.
    </p>
    <p>
    <i>NOTE:</i> This endpoint combines different concerns (signing up a user, createing a tenant, etc.).
    I decided to stay with one single endpoint, since the actions in isolation have no use case yet.
    </p>'
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            tenantName:
              type: string
              description: The name of your organization, your team, your department, etc
            email:
              type: string
              description: The email address for the admin account of your tenant
            password:
              type: string
              description: The password for the admin account of your tenant
            stripePriceId:
              type: string
              description: The id of the stripe price the stripe subscription should be created with (=the selected subscription)
          required:
            - tenantName
            - email
            - password
            - stripePriceId
  responses:
    201:
      description: Successfully signed up user and created tenant
      content:
        application/json:
          schema:
            type: object
            properties:
              user:
                type: object
                description: A CognitoUser
              tenant:
                $ref: ../../components/tenant.yaml
    422:
      $ref: ../../components/422.yaml
    401:
      $ref: ../../components/401.yaml
